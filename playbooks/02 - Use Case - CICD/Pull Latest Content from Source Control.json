{
    "@type": "Workflow",
    "triggerLimit": null,
    "name": "Pull Latest Content from Source Control",
    "aliasName": null,
    "tag": null,
    "description": "Pull latest content from Source Control repository and apply it within the FortiSOAR environment",
    "isActive": true,
    "debug": false,
    "singleRecordExecution": false,
    "remoteExecutableFlag": false,
    "parameters": [],
    "synchronous": false,
    "collection": "\/api\/3\/workflow_collections\/4c58fed3-9e16-451a-9528-0be2b71acda4",
    "versions": [],
    "triggerStep": "\/api\/3\/workflow_steps\/b4747b90-3981-457f-ae61-6d587bf5129a",
    "steps": [
        {
            "@type": "WorkflowStep",
            "name": "Abort Further Setup Steps for Dev",
            "description": null,
            "arguments": {
                "message": {
                    "tags": [],
                    "type": "\/api\/3\/picklists\/ff599189-3eeb-4c86-acb0-a7915e85ac3b",
                    "tenant": "",
                    "thread": false,
                    "content": "<p>The task of applying the latest content from the {{vars.repo_name}} repository has been aborted<\/p>",
                    "records": "{{vars.input.records[0]['@id']}}",
                    "parentstepid": "\/api\/3\/workflow_steps\/3fed066c-a883-49a8-81bc-8be588136f89"
                }
            },
            "status": null,
            "top": "1100",
            "left": "1000",
            "stepType": "\/api\/3\/workflow_step_types\/04d0cf46-b6a8-42c4-8683-60a7eaa69e8f",
            "group": null,
            "uuid": "720c2c06-94e9-4666-9cba-3e4e4e67e88f"
        },
        {
            "@type": "WorkflowStep",
            "name": "Abort Further Setup Steps for Prod",
            "description": null,
            "arguments": {
                "message": {
                    "tags": [],
                    "type": "\/api\/3\/picklists\/ff599189-3eeb-4c86-acb0-a7915e85ac3b",
                    "tenant": "",
                    "thread": false,
                    "content": "<p>The task of applying the latest content from the {{vars.repo_name}} repository has been aborted<\/p>",
                    "records": "{{vars.input.records[0]['@id']}}",
                    "parentstepid": "\/api\/3\/workflow_steps\/3fed066c-a883-49a8-81bc-8be588136f89"
                }
            },
            "status": null,
            "top": "1160",
            "left": "660",
            "stepType": "\/api\/3\/workflow_step_types\/04d0cf46-b6a8-42c4-8683-60a7eaa69e8f",
            "group": null,
            "uuid": "c5889ca2-6cbb-439b-8e3d-0ffed3972b8f"
        },
        {
            "@type": "WorkflowStep",
            "name": "Add Comment Playbook Is Active",
            "description": null,
            "arguments": {
                "resource": {
                    "type": "\/api\/3\/picklists\/ff599189-3eeb-4c86-acb0-a7915e85ac3b",
                    "people": [],
                    "content": "<h5>Warning: Playbook is Active or Awaiting State<\/h5>\n<hr>\n<p>{{vars.input.records[0].title}} operation is in Active\/Awaiting state. Please wait while the previous operation is completed.<\/p>",
                    "__replace": "",
                    "isImportant": false,
                    "peopleUpdated": false,
                    "changeManagement": "{{vars.input.records[0]['@id']}}"
                },
                "operation": "Overwrite",
                "collection": "\/api\/3\/comments",
                "__recommend": [],
                "fieldOperation": {
                    "recordTags": "Overwrite"
                },
                "step_variables": []
            },
            "status": null,
            "top": "460",
            "left": "1220",
            "stepType": "\/api\/3\/workflow_step_types\/2597053c-e718-44b4-8394-4d40fe26d357",
            "group": null,
            "uuid": "a23ccc91-bd8e-434a-a9ee-61eeddc4e2cb"
        },
        {
            "@type": "WorkflowStep",
            "name": "Check Source Control Connector Configuration",
            "description": null,
            "arguments": {
                "arguments": [],
                "apply_async": false,
                "step_variables": [],
                "pass_parent_env": false,
                "pass_input_record": true,
                "workflowReference": "\/api\/3\/workflows\/dd654cd4-923f-4c20-837c-279669c2fa82"
            },
            "status": null,
            "top": "140",
            "left": "1000",
            "stepType": "\/api\/3\/workflow_step_types\/74932bdc-b8b6-4d24-88c4-1a4dfbc524f3",
            "group": null,
            "uuid": "2c1fa08e-4236-4130-a372-b3452d72ac5a"
        },
        {
            "@type": "WorkflowStep",
            "name": "Check Status",
            "description": null,
            "arguments": {
                "conditions": [
                    {
                        "option": "Pending",
                        "step_iri": "\/api\/3\/workflow_steps\/3fed066c-a883-49a8-81bc-8be588136f89",
                        "condition": "{{ vars.input.records[0].status.itemValue == \"Pending\" }}",
                        "step_name": "Update Status as In Progress"
                    },
                    {
                        "option": "In Progress",
                        "default": true,
                        "step_iri": "\/api\/3\/workflow_steps\/a23ccc91-bd8e-434a-a9ee-61eeddc4e2cb",
                        "step_name": "Add Comment Playbook Is Active"
                    }
                ],
                "step_variables": []
            },
            "status": null,
            "top": "260",
            "left": "1000",
            "stepType": "\/api\/3\/workflow_step_types\/12254cf5-5db7-4b1a-8cb1-3af081924b28",
            "group": null,
            "uuid": "845c3ed3-b29d-4af1-8d2f-f9c5e98bcfc0"
        },
        {
            "@type": "WorkflowStep",
            "name": "Clone Repository",
            "description": null,
            "arguments": {
                "arguments": {
                    "clone_repo_params": "{\n\"org_name\": \"{{vars.org_name}}\",\n\"repo_name\": \"{{vars.repo_name}}\",\n\"branch_name\": \"{{vars.base_branch_name}}\",\n\"clone_as_zip\": true,\n\"repo_type\": \"Organization\"\n}",
                    "connector_config_id": "{{vars.steps.Check_Source_Control_Connector_Configuration['config_id']}}"
                },
                "apply_async": false,
                "step_variables": [],
                "pass_parent_env": false,
                "pass_input_record": true,
                "workflowReference": "{{vars.cicd_env[\"source_control_playbooks\"][\"CloneRepository\"][\"@id\"]}}"
            },
            "status": null,
            "top": "1220",
            "left": "120",
            "stepType": "\/api\/3\/workflow_step_types\/74932bdc-b8b6-4d24-88c4-1a4dfbc524f3",
            "group": null,
            "uuid": "d2a8a56c-dee8-44c3-8d20-e3a84533b1c8"
        },
        {
            "@type": "WorkflowStep",
            "name": "Configuration",
            "description": null,
            "arguments": {
                "cicd_env": "{{globalVars.cicd_env}}",
                "org_name": "{{vars.cicd_config.organizationName}}",
                "base_branch_name": "{{vars.cicd_config.baseBranch}}"
            },
            "status": null,
            "top": "960",
            "left": "300",
            "stepType": "\/api\/3\/workflow_step_types\/04d0cf46-b6a8-42c4-8683-60a7eaa69e8f",
            "group": null,
            "uuid": "52a82349-5018-4ba9-95e6-dc8a86c71fe0"
        },
        {
            "@type": "WorkflowStep",
            "name": "Confirm Apply Latest Changes",
            "description": null,
            "arguments": {
                "type": "InputBased",
                "input": {
                    "schema": {
                        "title": "Confirmation",
                        "description": "This task will apply the latest content from the {{vars.repo_name}} repository and may require publishing in case of edits to the module schema. The server will be unavailable for all users during the publishing process. Do you want to continue?",
                        "inputVariables": []
                    }
                },
                "record": "{{ vars.input.records[0][\"@id\"] }}",
                "agent_id": null,
                "resources": "change_management",
                "is_approval": false,
                "owner_detail": {
                    "isAssigned": false,
                    "emailRecipients": ""
                },
                "isRecordLinked": true,
                "step_variables": [],
                "response_mapping": {
                    "options": [
                        {
                            "option": "Yes",
                            "primary": true,
                            "step_iri": "\/api\/3\/workflow_steps\/d2a8a56c-dee8-44c3-8d20-e3a84533b1c8"
                        },
                        {
                            "option": "No",
                            "step_iri": "\/api\/3\/workflow_steps\/3fb0fbb3-cb7f-4847-b498-bfcea32e59db"
                        }
                    ],
                    "duplicateOption": false,
                    "customSuccessMessage": "Awaiting Playbook resumed successfully."
                },
                "email_notification": {
                    "enabled": false,
                    "smtpParameters": []
                },
                "customEmailExternal": false,
                "inline_channel_list": [],
                "external_channel_list": [],
                "unauthenticated_input": false,
                "external_email_subject": null,
                "internal_email_subject": "A FortiSOAR playbook is requesting your input",
                "custom_email_body_external": null,
                "external_email_attachments": null
            },
            "status": null,
            "top": "1110",
            "left": "300",
            "stepType": "\/api\/3\/workflow_step_types\/fc04082a-d7dc-4299-96fb-6837b1baa0fe",
            "group": null,
            "uuid": "2360e578-052b-4f1a-9b3b-d9ccc0999936"
        },
        {
            "@type": "WorkflowStep",
            "name": "Create Comment",
            "description": null,
            "arguments": {
                "resource": {
                    "type": "\/api\/3\/picklists\/ff599189-3eeb-4c86-acb0-a7915e85ac3b",
                    "people": [],
                    "content": "<p>Completed Task: Apply Latest Content<\/p>",
                    "__replace": "",
                    "isImportant": false,
                    "peopleUpdated": false,
                    "changeManagement": "{{vars.input.records[0]['@id']}}"
                },
                "operation": "Overwrite",
                "collection": "\/api\/3\/comments",
                "__recommend": [],
                "fieldOperation": {
                    "recordTags": "Overwrite"
                },
                "step_variables": []
            },
            "status": null,
            "top": "1940",
            "left": "120",
            "stepType": "\/api\/3\/workflow_step_types\/2597053c-e718-44b4-8394-4d40fe26d357",
            "group": null,
            "uuid": "f183e6b1-7bc4-4fa1-bbe5-c78d383d64b0"
        },
        {
            "@type": "WorkflowStep",
            "name": "Find Apply Latest Changes Record",
            "description": null,
            "arguments": {
                "query": {
                    "sort": [],
                    "limit": 30,
                    "logic": "AND",
                    "filters": [
                        {
                            "type": "primitive",
                            "field": "title",
                            "value": "Apply Latest Content",
                            "operator": "eq",
                            "_operator": "eq"
                        }
                    ]
                },
                "module": "change_management?$limit=30",
                "step_variables": []
            },
            "status": null,
            "top": "1340",
            "left": "120",
            "stepType": "\/api\/3\/workflow_step_types\/b593663d-7d13-40ce-a3a3-96dece928770",
            "group": null,
            "uuid": "b0caaefc-675c-41d8-b924-7c18f923dc3c"
        },
        {
            "@type": "WorkflowStep",
            "name": "Get Source Control Details",
            "description": null,
            "arguments": {
                "params": {
                    "iri": "\/api\/wf\/api\/dynamic-variable\/?limit=50&name=cicd_config",
                    "body": "",
                    "method": "GET"
                },
                "version": "3.2.3",
                "connector": "cyops_utilities",
                "operation": "make_cyops_request",
                "ignore_errors": true,
                "operationTitle": "FSR: Make FortiSOAR API Call",
                "step_variables": {
                    "cicd_config": "{{vars.result.data['hydra:member'][0].value | toDict }}"
                }
            },
            "status": null,
            "top": "480",
            "left": "820",
            "stepType": "\/api\/3\/workflow_step_types\/0109f35d-090b-4a2b-bd8a-94cbc3508562",
            "group": null,
            "uuid": "97bbbdf3-3802-4078-aeaa-229c9e3c75ab"
        },
        {
            "@type": "WorkflowStep",
            "name": "Has Source Control Configure",
            "description": null,
            "arguments": {
                "conditions": [
                    {
                        "option": "Failed",
                        "step_iri": "\/api\/3\/workflow_steps\/43dbcd99-cb8e-47a8-84b0-7373c64230b8",
                        "condition": "{{ vars.steps.Get_Source_Control_Details.status==\"failed\" or vars.steps.Get_Source_Control_Details.data['hydra:member'] | length == 0 }}",
                        "step_name": "Source Control is not Configured"
                    },
                    {
                        "option": "Success",
                        "default": true,
                        "step_iri": "\/api\/3\/workflow_steps\/94153c82-1139-4ca1-9f22-7933dc708cfc",
                        "step_name": "Is Prod or Dev Env"
                    }
                ],
                "step_variables": []
            },
            "status": null,
            "top": "600",
            "left": "820",
            "stepType": "\/api\/3\/workflow_step_types\/12254cf5-5db7-4b1a-8cb1-3af081924b28",
            "group": null,
            "uuid": "7196870f-c012-4ec4-a913-0f7ed5db3a50"
        },
        {
            "@type": "WorkflowStep",
            "name": "Import FortiSOAR Template",
            "description": null,
            "arguments": {
                "name": "CICD Utils",
                "params": {
                    "filename": "{{vars.steps.Clone_Repository.data.path.split('\/')[-1]}}",
                    "file_path": "{{vars.steps.Clone_Repository.data.path}}"
                },
                "version": "1.1.0",
                "connector": "cicd-utils",
                "operation": "import_fortisoar_template",
                "operationTitle": "Import FortiSOAR Template",
                "pickFromTenant": false,
                "step_variables": []
            },
            "status": null,
            "top": "1580",
            "left": "120",
            "stepType": "\/api\/3\/workflow_step_types\/0bfed618-0316-11e7-93ae-92361f002671",
            "group": null,
            "uuid": "4b66de3f-03f2-4cfa-bfbc-00453548e2a4"
        },
        {
            "@type": "WorkflowStep",
            "name": "Is Prod or Dev Env",
            "description": null,
            "arguments": {
                "conditions": [
                    {
                        "option": "Prod",
                        "step_iri": "\/api\/3\/workflow_steps\/e9297606-11c0-4951-9844-a07b16ef20a1",
                        "condition": "{{ vars.input.records[0].environment.itemValue == \"Production\" }}",
                        "step_name": "Select Input For Prod Env"
                    },
                    {
                        "option": "Dev",
                        "default": true,
                        "step_iri": "\/api\/3\/workflow_steps\/cdebd176-5fcd-4475-9b77-67ad0e3ddf5f",
                        "step_name": "Select Input For Dev Env"
                    }
                ]
            },
            "status": null,
            "top": "705",
            "left": "650",
            "stepType": "\/api\/3\/workflow_step_types\/12254cf5-5db7-4b1a-8cb1-3af081924b28",
            "group": null,
            "uuid": "94153c82-1139-4ca1-9f22-7933dc708cfc"
        },
        {
            "@type": "WorkflowStep",
            "name": "No User Confirmation",
            "description": null,
            "arguments": [],
            "status": null,
            "top": "1380",
            "left": "460",
            "stepType": "\/api\/3\/workflow_step_types\/04d0cf46-b6a8-42c4-8683-60a7eaa69e8f",
            "group": null,
            "uuid": "697bee6f-0ae5-4909-b131-13ff078007f5"
        },
        {
            "@type": "WorkflowStep",
            "name": "Select Input For Dev Env",
            "description": null,
            "arguments": {
                "type": "InputBased",
                "input": {
                    "schema": {
                        "title": "Apply Latest Content",
                        "description": "Select the repository you want to apply the changes from",
                        "inputVariables": [
                            {
                                "name": "selectRepositoryType",
                                "type": "array",
                                "label": "Select Repository Type",
                                "title": "Dynamic List",
                                "usable": true,
                                "options": [
                                    "Prod Content",
                                    "Dev Settings"
                                ],
                                "tooltip": "",
                                "dataType": "dynamicList",
                                "formType": "dynamicList",
                                "required": true,
                                "_expanded": true,
                                "mmdUpdate": true,
                                "collection": false,
                                "searchable": false,
                                "templateUrl": "app\/components\/form\/fields\/dynamicList.html",
                                "defaultValue": null,
                                "_previousName": "selectRepositoryType",
                                "playbookField": true,
                                "lengthConstraint": true,
                                "allowedGridColumn": false,
                                "jinjaExpressionView": true,
                                "useRecordFieldDefault": false
                            }
                        ]
                    }
                },
                "record": "{{ vars.input.records[0][\"@id\"] }}",
                "agent_id": null,
                "resources": "change_management",
                "is_approval": false,
                "owner_detail": {
                    "isAssigned": false,
                    "emailRecipients": ""
                },
                "isRecordLinked": true,
                "step_variables": {
                    "repo_name": "{% if vars.steps.Select_Input_For_Dev_Env.input.selectRepositoryType == \"Dev Settings\" %}{{vars.cicd_config.developmentSettings.split('\/')[-1]}}{% else %}{{vars.cicd_config.content.split('\/')[-1]}}{% endif %}"
                },
                "response_mapping": {
                    "options": [
                        {
                            "option": "Submit",
                            "primary": true,
                            "step_iri": "\/api\/3\/workflow_steps\/52a82349-5018-4ba9-95e6-dc8a86c71fe0"
                        },
                        {
                            "option": "Abort",
                            "step_iri": "\/api\/3\/workflow_steps\/720c2c06-94e9-4666-9cba-3e4e4e67e88f"
                        }
                    ],
                    "duplicateOption": false,
                    "customSuccessMessage": "Awaiting Playbook resumed successfully."
                },
                "email_notification": {
                    "enabled": false,
                    "smtpParameters": []
                },
                "customEmailExternal": false,
                "inline_channel_list": [],
                "external_channel_list": [],
                "unauthenticated_input": false,
                "external_email_subject": null,
                "internal_email_subject": "A FortiSOAR playbook is requesting your input",
                "custom_email_body_external": null,
                "external_email_attachments": null
            },
            "status": null,
            "top": "960",
            "left": "840",
            "stepType": "\/api\/3\/workflow_step_types\/fc04082a-d7dc-4299-96fb-6837b1baa0fe",
            "group": null,
            "uuid": "cdebd176-5fcd-4475-9b77-67ad0e3ddf5f"
        },
        {
            "@type": "WorkflowStep",
            "name": "Select Input For Prod Env",
            "description": null,
            "arguments": {
                "type": "InputBased",
                "input": {
                    "schema": {
                        "title": "Apply Latest Content",
                        "description": "Select the repository you want to apply the changes from",
                        "inputVariables": [
                            {
                                "name": "selectRepositoryType",
                                "type": "array",
                                "label": "Select Repository Type",
                                "title": "Dynamic List",
                                "usable": true,
                                "options": [
                                    "Prod Content",
                                    "Prod Settings"
                                ],
                                "tooltip": "",
                                "dataType": "dynamicList",
                                "formType": "dynamicList",
                                "required": true,
                                "_expanded": true,
                                "mmdUpdate": true,
                                "collection": false,
                                "searchable": false,
                                "templateUrl": "app\/components\/form\/fields\/dynamicList.html",
                                "defaultValue": null,
                                "_previousName": "selectRepositoryTy",
                                "playbookField": true,
                                "lengthConstraint": true,
                                "allowedGridColumn": false,
                                "jinjaExpressionView": true,
                                "useRecordFieldDefault": false
                            }
                        ]
                    }
                },
                "record": "{{ vars.input.records[0][\"@id\"] }}",
                "agent_id": null,
                "resources": "change_management",
                "is_approval": false,
                "owner_detail": {
                    "isAssigned": false,
                    "emailRecipients": ""
                },
                "isRecordLinked": true,
                "step_variables": {
                    "repo_name": "{% if vars.steps.Select_Input_For_Prod_Env.input.selectRepositoryType == \"Prod Settings\" %}{{vars.cicd_config.productionSettings.split('\/')[-1]}}{% else %}{{vars.cicd_config.content.split('\/')[-1]}}{% endif %}"
                },
                "response_mapping": {
                    "options": [
                        {
                            "option": "Submit",
                            "primary": true,
                            "step_iri": "\/api\/3\/workflow_steps\/52a82349-5018-4ba9-95e6-dc8a86c71fe0"
                        },
                        {
                            "option": "Abort",
                            "step_iri": "\/api\/3\/workflow_steps\/c5889ca2-6cbb-439b-8e3d-0ffed3972b8f"
                        }
                    ],
                    "duplicateOption": false,
                    "customSuccessMessage": "Awaiting Playbook resumed successfully."
                },
                "email_notification": {
                    "enabled": false,
                    "smtpParameters": []
                },
                "customEmailExternal": false,
                "inline_channel_list": [],
                "external_channel_list": [],
                "unauthenticated_input": false,
                "external_email_subject": null,
                "internal_email_subject": "A FortiSOAR playbook is requesting your input",
                "custom_email_body_external": null,
                "external_email_attachments": null
            },
            "status": null,
            "top": "840",
            "left": "475",
            "stepType": "\/api\/3\/workflow_step_types\/fc04082a-d7dc-4299-96fb-6837b1baa0fe",
            "group": null,
            "uuid": "e9297606-11c0-4951-9844-a07b16ef20a1"
        },
        {
            "@type": "WorkflowStep",
            "name": "Source Control is not Configured",
            "description": null,
            "arguments": {
                "resource": {
                    "type": "\/api\/3\/picklists\/ff599189-3eeb-4c86-acb0-a7915e85ac3b",
                    "people": [],
                    "content": "<h5>Failed: Source Control Is Not Configured<\/h5>\n<hr>\n<p>Source Control for the task \"{{vars.input.records[0].title}}\" Is Not Configured<\/p>",
                    "__replace": "",
                    "isImportant": false,
                    "peopleUpdated": false,
                    "changeManagement": "{{vars.input.records[0]['@id']}}"
                },
                "operation": "Overwrite",
                "collection": "\/api\/3\/comments",
                "__recommend": [],
                "fieldOperation": {
                    "recordTags": "Overwrite"
                },
                "step_variables": []
            },
            "status": null,
            "top": "720",
            "left": "1020",
            "stepType": "\/api\/3\/workflow_step_types\/2597053c-e718-44b4-8394-4d40fe26d357",
            "group": null,
            "uuid": "43dbcd99-cb8e-47a8-84b0-7373c64230b8"
        },
        {
            "@type": "WorkflowStep",
            "name": "Start",
            "description": null,
            "arguments": {
                "route": "04cd4840-8fe2-419d-9726-dcb19215bce5",
                "title": "Apply Latest Content",
                "resources": [
                    "change_management"
                ],
                "inputVariables": [],
                "step_variables": {
                    "input": {
                        "params": [],
                        "records": "{{vars.input.records}}"
                    }
                },
                "displayConditions": {
                    "change_management": {
                        "sort": [],
                        "limit": 30,
                        "logic": "AND",
                        "filters": [
                            {
                                "type": "primitive",
                                "field": "title",
                                "value": "Apply Latest Content",
                                "operator": "eq",
                                "_operator": "eq"
                            },
                            {
                                "type": "array",
                                "field": "type",
                                "value": [
                                    "409b289f-33f5-423f-9174-24bc8628cc4a",
                                    "dc57442c-3d52-43a0-aa19-ed2898e30ff7"
                                ],
                                "module": "type",
                                "display": "",
                                "operator": "in",
                                "template": "multiselectpicklist",
                                "OPERATOR_KEY": "$",
                                "useInOperator": true,
                                "previousOperator": "in",
                                "previousTemplate": "multiselectpicklist"
                            },
                            {
                                "type": "object",
                                "field": "status",
                                "value": "\/api\/3\/picklists\/cc6dc0fe-4a49-44e7-af30-8a0fbeacd293",
                                "_value": {
                                    "@id": "\/api\/3\/picklists\/cc6dc0fe-4a49-44e7-af30-8a0fbeacd293",
                                    "display": "Pending",
                                    "itemValue": "Pending"
                                },
                                "operator": "eq"
                            }
                        ]
                    }
                },
                "executeButtonText": "Execute",
                "noRecordExecution": false,
                "showToasterMessage": {
                    "visible": false,
                    "messageVisible": true
                },
                "singleRecordExecution": true
            },
            "status": null,
            "top": "30",
            "left": "1000",
            "stepType": "\/api\/3\/workflow_step_types\/f414d039-bb0d-4e59-9c39-a8f1e880b18a",
            "group": null,
            "uuid": "b4747b90-3981-457f-ae61-6d587bf5129a"
        },
        {
            "@type": "WorkflowStep",
            "name": "Terminate Apply Latest Changes",
            "description": null,
            "arguments": {
                "resource": {
                    "type": "\/api\/3\/picklists\/ff599189-3eeb-4c86-acb0-a7915e85ac3b",
                    "people": [],
                    "content": "<p>The task of applying the latest content from the {{vars.repo_name}} repository has been aborted<\/p>",
                    "__replace": "",
                    "isImportant": false,
                    "peopleUpdated": false,
                    "changeManagement": "{{vars.input.records[0]['@id']}}"
                },
                "operation": "Overwrite",
                "collection": "\/api\/3\/comments",
                "__recommend": [],
                "fieldOperation": {
                    "recordTags": "Overwrite"
                },
                "step_variables": []
            },
            "status": null,
            "top": "1260",
            "left": "460",
            "stepType": "\/api\/3\/workflow_step_types\/2597053c-e718-44b4-8394-4d40fe26d357",
            "group": null,
            "uuid": "3fb0fbb3-cb7f-4847-b498-bfcea32e59db"
        },
        {
            "@type": "WorkflowStep",
            "name": "Update Deployed Date",
            "description": null,
            "arguments": {
                "message": {
                    "tags": [],
                    "type": "\/api\/3\/picklists\/ff599189-3eeb-4c86-acb0-a7915e85ac3b",
                    "tenant": "",
                    "thread": false,
                    "content": "<p>Applying the latest content from the {{vars.repo_name}} repository<\/p>",
                    "records": "{{vars.steps.Find_Apply_Latest_Changes_Record | json_query(\"[*][\\\"@id\\\"][]\")}}",
                    "parentstepid": "\/api\/3\/workflow_steps\/a5c3262e-440b-4950-82bc-ad5f39e9bb93"
                },
                "for_each": {
                    "item": "{{vars.steps.Find_Apply_Latest_Changes_Record}}",
                    "__bulk": true,
                    "parallel": false,
                    "condition": "",
                    "batch_size": 100
                },
                "resource": {
                    "lastBuildDeployedOn": "{%if vars.repo_name == vars.cicd_config.content.split('\/')[-1] %}{{arrow.utcnow().int_timestamp}}{%else%}{{vars.input.records[0].lastBuildDeployedOn}}{%endif%}"
                },
                "_showJson": false,
                "operation": "Append",
                "collection": "{{vars.item['@id']}}",
                "__recommend": [],
                "collectionType": "\/api\/3\/change_management",
                "fieldOperation": {
                    "recordTags": "Append"
                },
                "step_variables": []
            },
            "status": null,
            "top": "1820",
            "left": "120",
            "stepType": "\/api\/3\/workflow_step_types\/b593663d-7d13-40ce-a3a3-96dece928722",
            "group": null,
            "uuid": "e343e5e7-c917-4e1a-bd82-53a3d2859c50"
        },
        {
            "@type": "WorkflowStep",
            "name": "Update Status",
            "description": null,
            "arguments": {
                "resource": {
                    "status": "\/api\/3\/picklists\/cc6dc0fe-4a49-44e7-af30-8a0fbeacd293"
                },
                "_showJson": false,
                "operation": "Append",
                "collection": "{{vars.input.records[0]['@id']}}",
                "__recommend": [],
                "collectionType": "\/api\/3\/change_management",
                "fieldOperation": {
                    "recordTags": "Append"
                },
                "step_variables": []
            },
            "status": null,
            "top": "1460",
            "left": "120",
            "stepType": "\/api\/3\/workflow_step_types\/b593663d-7d13-40ce-a3a3-96dece928722",
            "group": null,
            "uuid": "edbc6631-e44d-4bb6-a07d-d057aa5d0834"
        },
        {
            "@type": "WorkflowStep",
            "name": "Update Status as In Progress",
            "description": null,
            "arguments": {
                "message": {
                    "tags": [],
                    "type": "\/api\/3\/picklists\/ff599189-3eeb-4c86-acb0-a7915e85ac3b",
                    "tenant": "",
                    "thread": false,
                    "content": "<p>Initiating Task: Apply Latest Content<\/p>",
                    "records": "{{vars.input.records[0]['@id']}}"
                },
                "resource": {
                    "status": "\/api\/3\/picklists\/7f0263bf-29ab-4453-aefe-41d20f0fe9c3"
                },
                "operation": "Append",
                "collection": "{{vars.input.records[0]['@id']}}",
                "__recommend": [],
                "collectionType": "\/api\/3\/change_management",
                "fieldOperation": {
                    "recordTags": "Append"
                },
                "step_variables": []
            },
            "status": null,
            "top": "360",
            "left": "820",
            "stepType": "\/api\/3\/workflow_step_types\/b593663d-7d13-40ce-a3a3-96dece928722",
            "group": null,
            "uuid": "3fed066c-a883-49a8-81bc-8be588136f89"
        },
        {
            "@type": "WorkflowStep",
            "name": "Update Status to Pending",
            "description": null,
            "arguments": {
                "resource": {
                    "status": "\/api\/3\/picklists\/cc6dc0fe-4a49-44e7-af30-8a0fbeacd293"
                },
                "operation": "Append",
                "collection": "{{vars.input.records[0]['@id']}}",
                "__recommend": [],
                "collectionType": "\/api\/3\/change_management",
                "fieldOperation": {
                    "recordTags": "Append"
                },
                "step_variables": []
            },
            "status": null,
            "top": "1360",
            "left": "1300",
            "stepType": "\/api\/3\/workflow_step_types\/b593663d-7d13-40ce-a3a3-96dece928722",
            "group": null,
            "uuid": "9ddd19a2-5a0f-4186-a7d5-81f0462795d5"
        },
        {
            "@type": "WorkflowStep",
            "name": "Wait for Publish",
            "description": null,
            "arguments": {
                "rule": {
                    "actions": [
                        {
                            "type": "resume_playbook",
                            "enabled": true,
                            "channel_uuid": "e2ce87c2-c55a-11ec-9d64-0242ac120002"
                        }
                    ],
                    "is_active": true,
                    "event_source": "crudhub"
                },
                "type": "TimeBased",
                "delay": {
                    "days": 0,
                    "hours": 0,
                    "weeks": 0,
                    "minutes": 1,
                    "seconds": 0
                }
            },
            "status": null,
            "top": "1700",
            "left": "120",
            "stepType": "\/api\/3\/workflow_step_types\/6832e556-b9c7-497a-babe-feda3bd27dbf",
            "group": null,
            "uuid": "2f0328bd-2b74-427e-b2e8-099ab6f4edbf"
        }
    ],
    "routes": [
        {
            "@type": "WorkflowRoute",
            "name": "Abort Dev Env -> Update Status to Pending",
            "targetStep": "\/api\/3\/workflow_steps\/9ddd19a2-5a0f-4186-a7d5-81f0462795d5",
            "sourceStep": "\/api\/3\/workflow_steps\/720c2c06-94e9-4666-9cba-3e4e4e67e88f",
            "label": null,
            "isExecuted": false,
            "group": null,
            "uuid": "7ba2ed1b-6435-4c16-9b3d-46801ecb2719"
        },
        {
            "@type": "WorkflowRoute",
            "name": "Abort Prod Env -> Update Status to Pending",
            "targetStep": "\/api\/3\/workflow_steps\/9ddd19a2-5a0f-4186-a7d5-81f0462795d5",
            "sourceStep": "\/api\/3\/workflow_steps\/c5889ca2-6cbb-439b-8e3d-0ffed3972b8f",
            "label": null,
            "isExecuted": false,
            "group": null,
            "uuid": "82cb2958-7b23-49ff-bcbd-66398bf59e03"
        },
        {
            "@type": "WorkflowRoute",
            "name": "C -> Check Status",
            "targetStep": "\/api\/3\/workflow_steps\/845c3ed3-b29d-4af1-8d2f-f9c5e98bcfc0",
            "sourceStep": "\/api\/3\/workflow_steps\/2c1fa08e-4236-4130-a372-b3452d72ac5a",
            "label": null,
            "isExecuted": false,
            "group": null,
            "uuid": "f02dd351-2c3a-496a-a907-848e97280baf"
        },
        {
            "@type": "WorkflowRoute",
            "name": "Check Status -> Add Comment Playbook Is Active",
            "targetStep": "\/api\/3\/workflow_steps\/a23ccc91-bd8e-434a-a9ee-61eeddc4e2cb",
            "sourceStep": "\/api\/3\/workflow_steps\/845c3ed3-b29d-4af1-8d2f-f9c5e98bcfc0",
            "label": "In Progress",
            "isExecuted": false,
            "group": null,
            "uuid": "49c009fe-0c6b-4e47-ac2c-99cf34b5e912"
        },
        {
            "@type": "WorkflowRoute",
            "name": "Check Status -> Update Status as In Progress",
            "targetStep": "\/api\/3\/workflow_steps\/3fed066c-a883-49a8-81bc-8be588136f89",
            "sourceStep": "\/api\/3\/workflow_steps\/845c3ed3-b29d-4af1-8d2f-f9c5e98bcfc0",
            "label": "Pending",
            "isExecuted": false,
            "group": null,
            "uuid": "e3e63583-f4ef-4957-a33c-c6c5d330e3f8"
        },
        {
            "@type": "WorkflowRoute",
            "name": "Clone Repository -> Find Apply Latest Changes Record",
            "targetStep": "\/api\/3\/workflow_steps\/b0caaefc-675c-41d8-b924-7c18f923dc3c",
            "sourceStep": "\/api\/3\/workflow_steps\/d2a8a56c-dee8-44c3-8d20-e3a84533b1c8",
            "label": null,
            "isExecuted": false,
            "group": null,
            "uuid": "fd5d24ee-49b2-4e5d-b645-7d688942b171"
        },
        {
            "@type": "WorkflowRoute",
            "name": "Configuration -> Get User Conformation",
            "targetStep": "\/api\/3\/workflow_steps\/2360e578-052b-4f1a-9b3b-d9ccc0999936",
            "sourceStep": "\/api\/3\/workflow_steps\/52a82349-5018-4ba9-95e6-dc8a86c71fe0",
            "label": null,
            "isExecuted": false,
            "group": null,
            "uuid": "639aa29e-3363-4ee7-8477-dabbd6224d37"
        },
        {
            "@type": "WorkflowRoute",
            "name": "Confirm Apply Latest Changes -> Clone Repository",
            "targetStep": "\/api\/3\/workflow_steps\/d2a8a56c-dee8-44c3-8d20-e3a84533b1c8",
            "sourceStep": "\/api\/3\/workflow_steps\/2360e578-052b-4f1a-9b3b-d9ccc0999936",
            "label": "Yes",
            "isExecuted": false,
            "group": null,
            "uuid": "0dd2b802-9933-469f-9931-2851baa2d593"
        },
        {
            "@type": "WorkflowRoute",
            "name": "Copy of Update Status -> Import FortiSOAR Template",
            "targetStep": "\/api\/3\/workflow_steps\/4b66de3f-03f2-4cfa-bfbc-00453548e2a4",
            "sourceStep": "\/api\/3\/workflow_steps\/edbc6631-e44d-4bb6-a07d-d057aa5d0834",
            "label": null,
            "isExecuted": false,
            "group": null,
            "uuid": "98283a77-5f1a-4180-82e2-71d6e4c83524"
        },
        {
            "@type": "WorkflowRoute",
            "name": "Dummy Step1 -> Update Status to Pending",
            "targetStep": "\/api\/3\/workflow_steps\/9ddd19a2-5a0f-4186-a7d5-81f0462795d5",
            "sourceStep": "\/api\/3\/workflow_steps\/697bee6f-0ae5-4909-b131-13ff078007f5",
            "label": null,
            "isExecuted": false,
            "group": null,
            "uuid": "69c74687-6f8f-4b15-b322-cac831f680c5"
        },
        {
            "@type": "WorkflowRoute",
            "name": "Find Apply Latest Changes Record -> Copy of Update Status",
            "targetStep": "\/api\/3\/workflow_steps\/edbc6631-e44d-4bb6-a07d-d057aa5d0834",
            "sourceStep": "\/api\/3\/workflow_steps\/b0caaefc-675c-41d8-b924-7c18f923dc3c",
            "label": null,
            "isExecuted": false,
            "group": null,
            "uuid": "32d8462c-e069-42b7-b3d3-92029d74d1fa"
        },
        {
            "@type": "WorkflowRoute",
            "name": "Get Source Control Details -> Has Source Control Configure",
            "targetStep": "\/api\/3\/workflow_steps\/7196870f-c012-4ec4-a913-0f7ed5db3a50",
            "sourceStep": "\/api\/3\/workflow_steps\/97bbbdf3-3802-4078-aeaa-229c9e3c75ab",
            "label": null,
            "isExecuted": false,
            "group": null,
            "uuid": "9d0bc9fe-8d8d-4ca8-ad6a-78406d67f25e"
        },
        {
            "@type": "WorkflowRoute",
            "name": "Get User Confirmation -> Terminate Apply Latest Changes",
            "targetStep": "\/api\/3\/workflow_steps\/3fb0fbb3-cb7f-4847-b498-bfcea32e59db",
            "sourceStep": "\/api\/3\/workflow_steps\/2360e578-052b-4f1a-9b3b-d9ccc0999936",
            "label": "No",
            "isExecuted": false,
            "group": null,
            "uuid": "29f8a3cd-689d-4ce2-a0e0-977fd4575f77"
        },
        {
            "@type": "WorkflowRoute",
            "name": "Has Source Control Configure -> Is Prod or Dev Env",
            "targetStep": "\/api\/3\/workflow_steps\/94153c82-1139-4ca1-9f22-7933dc708cfc",
            "sourceStep": "\/api\/3\/workflow_steps\/7196870f-c012-4ec4-a913-0f7ed5db3a50",
            "label": "Success",
            "isExecuted": false,
            "group": null,
            "uuid": "282cac1c-9fb0-4024-9b07-be963d33162c"
        },
        {
            "@type": "WorkflowRoute",
            "name": "Has Source Control Configure -> Source Control is not Configured",
            "targetStep": "\/api\/3\/workflow_steps\/43dbcd99-cb8e-47a8-84b0-7373c64230b8",
            "sourceStep": "\/api\/3\/workflow_steps\/7196870f-c012-4ec4-a913-0f7ed5db3a50",
            "label": "Failed",
            "isExecuted": false,
            "group": null,
            "uuid": "be9af9f2-648d-4aff-a708-3279d6d9626d"
        },
        {
            "@type": "WorkflowRoute",
            "name": "Import FortiSOAR Template -> Wait for Publish",
            "targetStep": "\/api\/3\/workflow_steps\/2f0328bd-2b74-427e-b2e8-099ab6f4edbf",
            "sourceStep": "\/api\/3\/workflow_steps\/4b66de3f-03f2-4cfa-bfbc-00453548e2a4",
            "label": null,
            "isExecuted": false,
            "group": null,
            "uuid": "dbbf9d04-d710-4bd7-b3b7-b60a941dfe17"
        },
        {
            "@type": "WorkflowRoute",
            "name": "Is Prod or Dev Env -> Copy of Select Input For Prod Env",
            "targetStep": "\/api\/3\/workflow_steps\/cdebd176-5fcd-4475-9b77-67ad0e3ddf5f",
            "sourceStep": "\/api\/3\/workflow_steps\/94153c82-1139-4ca1-9f22-7933dc708cfc",
            "label": "Dev",
            "isExecuted": false,
            "group": null,
            "uuid": "0307678a-f593-48d4-a0e1-8cce0f105c1d"
        },
        {
            "@type": "WorkflowRoute",
            "name": "Is Prod or Dev Env -> Select Settings or Content Repo",
            "targetStep": "\/api\/3\/workflow_steps\/e9297606-11c0-4951-9844-a07b16ef20a1",
            "sourceStep": "\/api\/3\/workflow_steps\/94153c82-1139-4ca1-9f22-7933dc708cfc",
            "label": "Prod",
            "isExecuted": false,
            "group": null,
            "uuid": "e41f8e21-63d8-4e0d-8c31-73aa7bcf5a19"
        },
        {
            "@type": "WorkflowRoute",
            "name": "Select Input For Dev Env -> Abort Dev Env",
            "targetStep": "\/api\/3\/workflow_steps\/720c2c06-94e9-4666-9cba-3e4e4e67e88f",
            "sourceStep": "\/api\/3\/workflow_steps\/cdebd176-5fcd-4475-9b77-67ad0e3ddf5f",
            "label": "Abort",
            "isExecuted": false,
            "group": null,
            "uuid": "5af083f4-57ae-457b-8e8e-b7881919317f"
        },
        {
            "@type": "WorkflowRoute",
            "name": "Select Input For Dev Env -> Configuration",
            "targetStep": "\/api\/3\/workflow_steps\/52a82349-5018-4ba9-95e6-dc8a86c71fe0",
            "sourceStep": "\/api\/3\/workflow_steps\/cdebd176-5fcd-4475-9b77-67ad0e3ddf5f",
            "label": "Submit",
            "isExecuted": false,
            "group": null,
            "uuid": "7a2a5bca-e6b3-4346-8d1b-932a045f60ee"
        },
        {
            "@type": "WorkflowRoute",
            "name": "Select Input For Prod Env -> Abort Step",
            "targetStep": "\/api\/3\/workflow_steps\/c5889ca2-6cbb-439b-8e3d-0ffed3972b8f",
            "sourceStep": "\/api\/3\/workflow_steps\/e9297606-11c0-4951-9844-a07b16ef20a1",
            "label": "Abort",
            "isExecuted": false,
            "group": null,
            "uuid": "73eaaffe-bd47-49cf-8fbf-68d9d2d0117f"
        },
        {
            "@type": "WorkflowRoute",
            "name": "Select Input For Prod Env -> Configuration",
            "targetStep": "\/api\/3\/workflow_steps\/52a82349-5018-4ba9-95e6-dc8a86c71fe0",
            "sourceStep": "\/api\/3\/workflow_steps\/e9297606-11c0-4951-9844-a07b16ef20a1",
            "label": "Submit",
            "isExecuted": false,
            "group": null,
            "uuid": "72a7431f-1168-4d68-b40a-e60d36940d7e"
        },
        {
            "@type": "WorkflowRoute",
            "name": "Source Control is not Configured -> Update Status to Pending",
            "targetStep": "\/api\/3\/workflow_steps\/9ddd19a2-5a0f-4186-a7d5-81f0462795d5",
            "sourceStep": "\/api\/3\/workflow_steps\/43dbcd99-cb8e-47a8-84b0-7373c64230b8",
            "label": null,
            "isExecuted": false,
            "group": null,
            "uuid": "d32034ef-1104-49a0-9174-bf67495ab6e2"
        },
        {
            "@type": "WorkflowRoute",
            "name": "Start -> C",
            "targetStep": "\/api\/3\/workflow_steps\/2c1fa08e-4236-4130-a372-b3452d72ac5a",
            "sourceStep": "\/api\/3\/workflow_steps\/b4747b90-3981-457f-ae61-6d587bf5129a",
            "label": null,
            "isExecuted": false,
            "group": null,
            "uuid": "ee07fdf7-8d9f-4691-871e-9e42aa6f8706"
        },
        {
            "@type": "WorkflowRoute",
            "name": "Terminate Apply Latest Changes -> No User Confirmation",
            "targetStep": "\/api\/3\/workflow_steps\/697bee6f-0ae5-4909-b131-13ff078007f5",
            "sourceStep": "\/api\/3\/workflow_steps\/3fb0fbb3-cb7f-4847-b498-bfcea32e59db",
            "label": null,
            "isExecuted": false,
            "group": null,
            "uuid": "5ad7030c-005e-4d8c-9f5a-baba0b720c33"
        },
        {
            "@type": "WorkflowRoute",
            "name": "Update Deployed Date -> Create Comment",
            "targetStep": "\/api\/3\/workflow_steps\/f183e6b1-7bc4-4fa1-bbe5-c78d383d64b0",
            "sourceStep": "\/api\/3\/workflow_steps\/e343e5e7-c917-4e1a-bd82-53a3d2859c50",
            "label": null,
            "isExecuted": false,
            "group": null,
            "uuid": "c38028f2-fdeb-4627-ba88-89a8a36eb3dd"
        },
        {
            "@type": "WorkflowRoute",
            "name": "Update Status as In Progress -> Get Source Control Details",
            "targetStep": "\/api\/3\/workflow_steps\/97bbbdf3-3802-4078-aeaa-229c9e3c75ab",
            "sourceStep": "\/api\/3\/workflow_steps\/3fed066c-a883-49a8-81bc-8be588136f89",
            "label": null,
            "isExecuted": false,
            "group": null,
            "uuid": "e260e4bc-2451-4c6b-979f-d97b59040d3c"
        },
        {
            "@type": "WorkflowRoute",
            "name": "Wait for Publish -> Update Status",
            "targetStep": "\/api\/3\/workflow_steps\/e343e5e7-c917-4e1a-bd82-53a3d2859c50",
            "sourceStep": "\/api\/3\/workflow_steps\/2f0328bd-2b74-427e-b2e8-099ab6f4edbf",
            "label": null,
            "isExecuted": false,
            "group": null,
            "uuid": "f5b1815b-e5ba-42fe-85bd-8b0763ea69cb"
        }
    ],
    "groups": [],
    "priority": "\/api\/3\/picklists\/2b563c61-ae2c-41c0-a85a-c9709585e3f2",
    "uuid": "26de7a6e-ba7a-4a53-b1ef-e6e4bbcd6f69",
    "owners": [],
    "isPrivate": false,
    "deletedAt": null,
    "recordTags": [
        "CICD",
        "ManualTrigger"
    ]
}